#!/usr/bin/env php
<?php

require __DIR__ . '/../../vendor/autoload.php';

use Kekke\Mononoke\Framework;

// Remove the binary name
$args = $_SERVER['argv'];
array_shift($args);

// First argument should be the service file
$serviceFile = array_shift($args);

if (!$serviceFile || !file_exists($serviceFile)) {
    fwrite(STDERR, "Usage: mononoke <service_file.php> [--flags]\n");
    exit(1);
}

Framework::run($serviceFile, $args);